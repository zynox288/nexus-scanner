<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXUS | Security Dashboard</title>
    <style>
        :root {
            --bg-dark: #050000;
            --bg-panel: #1a0505;
            --red-dim: #5c0b0b;
            --red-bright: #ff1f1f;
            --text-main: #ffffff;
            --text-muted: #a0a0a0;
            --google: #4285f4;
            --discord: #5865F2;
            --github: #333;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            margin: 0;
            background-color: var(--bg-dark);
            color: var(--text-main);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow-x: hidden;
        }

        /* ========== LOGIN/REGISTER PAGE ========== */
        #auth-page {
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: radial-gradient(circle at center, #2a0505 0%, #000000 100%);
        }

        .auth-container {
            background: var(--bg-panel);
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 0 50px rgba(255, 0, 0, 0.3);
            border: 1px solid var(--red-dim);
            width: 100%;
            max-width: 420px;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .logo {
            font-size: 3rem;
            font-weight: 900;
            color: var(--red-bright);
            margin-bottom: 10px;
            letter-spacing: 3px;
            text-shadow: 0 0 20px var(--red-bright);
            text-align: center;
        }

        .subtitle {
            text-align: center;
            color: var(--text-muted);
            margin-bottom: 30px;
            font-size: 0.95rem;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }

        .tab {
            flex: 1;
            padding: 12px;
            background: transparent;
            border: 2px solid var(--red-dim);
            color: var(--text-muted);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.9rem;
        }

        .tab.active {
            background: var(--red-bright);
            color: white;
            border-color: var(--red-bright);
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-muted);
            font-size: 0.9rem;
            font-weight: 500;
        }

        .form-group input {
            width: 100%;
            padding: 12px 15px;
            background: var(--bg-dark);
            border: 2px solid var(--red-dim);
            border-radius: 8px;
            color: var(--text-main);
            font-size: 1rem;
            transition: all 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--red-bright);
            box-shadow: 0 0 10px rgba(255, 31, 31, 0.3);
        }

        .btn-primary {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, var(--red-bright), #cc0000);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 31, 31, 0.4);
        }

        .divider {
            text-align: center;
            margin: 25px 0;
            color: var(--text-muted);
            position: relative;
        }

        .divider::before,
        .divider::after {
            content: '';
            position: absolute;
            top: 50%;
            width: 40%;
            height: 1px;
            background: var(--red-dim);
        }

        .divider::before { left: 0; }
        .divider::after { right: 0; }

        .oauth-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .oauth-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 12px;
            border: 2px solid var(--red-dim);
            border-radius: 8px;
            background: transparent;
            color: var(--text-main);
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .oauth-btn:hover {
            border-color: var(--red-bright);
            background: rgba(255, 31, 31, 0.1);
        }

        .oauth-btn.google { border-color: var(--google); }
        .oauth-btn.google:hover { background: rgba(66, 133, 244, 0.1); border-color: var(--google); }

        .oauth-btn.discord { border-color: var(--discord); }
        .oauth-btn.discord:hover { background: rgba(88, 101, 242, 0.1); border-color: var(--discord); }

        .oauth-btn.github { border-color: var(--github); }
        .oauth-btn.github:hover { background: rgba(51, 51, 51, 0.2); border-color: #666; }

        .oauth-btn svg {
            width: 20px;
            height: 20px;
        }

        /* ========== DASHBOARD PAGE ========== */
        #dashboard-page {
            display: none;
            min-height: 100vh;
        }

        #dashboard-page.active {
            display: block;
        }

        /* Top Navigation */
        .top-nav {
            background: var(--bg-panel);
            border-bottom: 1px solid var(--red-dim);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-logo {
            font-size: 1.8rem;
            font-weight: 900;
            color: var(--red-bright);
            letter-spacing: 2px;
        }

        .nav-menu {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .nav-link {
            color: var(--text-muted);
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 6px;
            transition: all 0.3s;
            font-weight: 500;
            cursor: pointer;
        }

        .nav-link:hover {
            color: var(--red-bright);
            background: rgba(255, 31, 31, 0.1);
        }

        .nav-link.active {
            color: var(--red-bright);
            background: rgba(255, 31, 31, 0.15);
        }

        .user-menu {
            position: relative;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--red-bright);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            cursor: pointer;
            border: 2px solid var(--red-dim);
        }

        .dropdown {
            position: absolute;
            top: 55px;
            right: 0;
            background: var(--bg-panel);
            border: 1px solid var(--red-dim);
            border-radius: 8px;
            min-width: 180px;
            display: none;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
        }

        .dropdown.show {
            display: block;
            animation: fadeIn 0.2s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .dropdown-item {
            padding: 12px 20px;
            color: var(--text-main);
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 1px solid rgba(255, 31, 31, 0.1);
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        .dropdown-item:hover {
            background: rgba(255, 31, 31, 0.1);
            color: var(--red-bright);
        }

        /* Dashboard Content */
        .dashboard-content {
            padding: 30px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .section-title {
            font-size: 2rem;
            color: var(--red-bright);
            margin-bottom: 10px;
        }

        .section-subtitle {
            color: var(--text-muted);
            margin-bottom: 30px;
        }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: var(--bg-panel);
            border: 1px solid var(--red-dim);
            padding: 25px;
            border-radius: 12px;
            transition: all 0.3s;
        }

        .card:hover {
            border-color: var(--red-bright);
            box-shadow: 0 5px 20px rgba(255, 31, 31, 0.2);
            transform: translateY(-2px);
        }

        .card h3 {
            color: var(--red-bright);
            text-transform: uppercase;
            font-size: 0.9rem;
            margin-bottom: 15px;
            letter-spacing: 1px;
        }

        .pin-display {
            font-family: 'Courier New', monospace;
            font-size: 3rem;
            text-align: center;
            color: var(--red-bright);
            background: #000;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid var(--red-dim);
            margin: 15px 0;
            letter-spacing: 8px;
            min-height: 90px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .action-btn {
            background: var(--red-dim);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 6px;
            cursor: pointer;
            width: 100%;
            font-weight: 600;
            transition: all 0.3s;
            text-transform: uppercase;
            font-size: 0.9rem;
        }

        .action-btn:hover {
            background: var(--red-bright);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 31, 31, 0.3);
        }

        .action-btn:disabled {
            background: #333;
            color: #666;
            cursor: not-allowed;
            transform: none;
        }

        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            background-color: #333;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-indicator.online {
            background-color: #00ff00;
            box-shadow: 0 0 10px #00ff00;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .connection-warning {
            background: rgba(255, 100, 0, 0.2);
            border: 1px solid rgba(255, 100, 0, 0.5);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            margin-bottom: 20px;
            display: none;
        }

        .instructions {
            background: rgba(255, 100, 0, 0.1);
            border: 1px solid rgba(255, 100, 0, 0.3);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .instructions h4 {
            color: #ff6400;
            margin-bottom: 15px;
        }

        .instructions ol {
            margin-left: 20px;
            color: #ccc;
            line-height: 1.8;
        }

        .result-item {
            background: rgba(255, 0, 0, 0.1);
            border-left: 3px solid var(--red-bright);
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 4px;
            animation: slideIn 0.3s ease;
        }

        .threat-name {
            color: var(--red-bright);
            font-weight: 700;
            margin-bottom: 5px;
        }

        .results-container {
            max-height: 400px;
            overflow-y: auto;
        }

        .results-container::-webkit-scrollbar {
            width: 8px;
        }

        .results-container::-webkit-scrollbar-track {
            background: var(--bg-dark);
        }

        .results-container::-webkit-scrollbar-thumb {
            background: var(--red-dim);
            border-radius: 4px;
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        /* About Section */
        .about-content {
            max-width: 900px;
        }

        .about-content h2 {
            color: var(--red-bright);
            margin-top: 30px;
            margin-bottom: 15px;
        }

        .about-content p {
            color: var(--text-muted);
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .feature-list {
            list-style: none;
            padding: 0;
        }

        .feature-list li {
            padding: 10px 0;
            color: var(--text-muted);
            border-bottom: 1px solid var(--red-dim);
        }

        .feature-list li:before {
            content: "‚úì ";
            color: var(--red-bright);
            font-weight: bold;
            margin-right: 10px;
        }

        /* Account Section */
        .account-info {
            background: var(--bg-panel);
            border: 1px solid var(--red-dim);
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .account-info h3 {
            color: var(--red-bright);
            margin-bottom: 20px;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 31, 31, 0.1);
        }

        .info-row:last-child {
            border-bottom: none;
        }

        .info-label {
            color: var(--text-muted);
            font-weight: 600;
        }

        .info-value {
            color: var(--text-main);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .top-nav {
                flex-direction: column;
                gap: 15px;
            }

            .nav-menu {
                flex-wrap: wrap;
                justify-content: center;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .auth-container {
                margin: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- ========== AUTH PAGE (Login/Register) ========== -->
    <div id="auth-page">
        <div class="auth-container">
            <div class="logo">NEXUS</div>
            <p class="subtitle">Advanced Security System</p>

            <div class="tabs">
                <button class="tab active" onclick="switchTab('login')">Login</button>
                <button class="tab" onclick="switchTab('register')">Register</button>
            </div>

            <!-- Login Form -->
            <form class="auth-form active" id="login-form" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="login-email" placeholder="Enter your email" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="login-password" placeholder="Enter your password" required>
                </div>
                <button type="submit" class="btn-primary">Login</button>

                <div class="divider">OR</div>

                <div class="oauth-buttons">
                    <button type="button" class="oauth-btn google" onclick="loginWithOAuth('google')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
                            <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
                            <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
                            <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
                        </svg>
                        Continue with Google
                    </button>

                    <button type="button" class="oauth-btn discord" onclick="loginWithOAuth('discord')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03z"/>
                        </svg>
                        Continue with Discord
                    </button>

                    <button type="button" class="oauth-btn github" onclick="loginWithOAuth('github')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                        </svg>
                        Continue with GitHub
                    </button>
                </div>
            </form>

            <!-- Register Form -->
            <form class="auth-form" id="register-form" onsubmit="handleRegister(event)">
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" id="register-username" placeholder="Choose a username" required>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="register-email" placeholder="Enter your email" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="register-password" placeholder="Create a password" required>
                </div>
                <button type="submit" class="btn-primary">Create Account</button>

                <div class="divider">OR</div>

                <div class="oauth-buttons">
                    <button type="button" class="oauth-btn google" onclick="loginWithOAuth('google')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
                            <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
                            <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
                            <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
                        </svg>
                        Sign up with Google
                    </button>

                    <button type="button" class="oauth-btn discord" onclick="loginWithOAuth('discord')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03z"/>
                        </svg>
                        Sign up with Discord
                    </button>

                    <button type="button" class="oauth-btn github" onclick="loginWithOAuth('github')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                        </svg>
                        Sign up with GitHub
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- ========== DASHBOARD PAGE ========== -->
    <div id="dashboard-page">
        <!-- Top Navigation -->
        <nav class="top-nav">
            <div class="nav-logo">NEXUS</div>
            <div class="nav-menu">
                <a class="nav-link active" onclick="showSection('scanner')">Dashboard</a>
                <a class="nav-link" onclick="showSection('about')">About</a>
                <div class="user-menu">
                    <div class="user-avatar" onclick="toggleDropdown()">
                        <span id="user-initial">U</span>
                    </div>
                    <div class="dropdown" id="user-dropdown">
                        <div class="dropdown-item" onclick="showSection('account')">
                            üë§ Account
                        </div>
                        <div class="dropdown-item" onclick="logout()">
                            üö™ Logout
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Dashboard Content -->
        <div class="dashboard-content">
            <!-- Scanner Section -->
            <div class="content-section active" id="scanner-section">
                <h1 class="section-title">Security Scanner</h1>
                <p class="section-subtitle">Real-time malware detection and analysis</p>

                <div class="connection-warning" id="connection-warning">
                    ‚ö†Ô∏è Cannot connect to NEXUS Scanner. Please make sure the scanner is running on your computer.
                </div>

                <div class="instructions">
                    <h4>üìã How to Use:</h4>
                    <ol>
                        <li>Download and run <strong>NEXUS.exe</strong> on your computer</li>
                        <li>Click <strong>"Generate New PIN"</strong> below</li>
                        <li>Enter the PIN in the scanner window</li>
                        <li>Click <strong>"UNLOCK"</strong> to start scanning</li>
                        <li>View results here in real-time!</li>
                    </ol>
                </div>

                <div class="dashboard-grid">
                    <!-- PIN Generator Card -->
                    <div class="card">
                        <h3>üîê Security PIN (Limit: 5)</h3>
                        <div class="pin-display" id="pin-display">...</div>
                        <button class="action-btn" id="genBtn" onclick="generatePIN()">Generate New PIN</button>
                        <p style="font-size: 0.85rem; color: #666; margin-top: 12px; text-align: center;" id="limit-text">
                            Generations remaining: 5
                        </p>
                    </div>

                    <!-- Scanner Status Card -->
                    <div class="card">
                        <h3>üõ°Ô∏è Scanner Status</h3>
                        <p style="color: #aaa; margin-bottom: 8px;">Connection:</p>
                        <div style="display: flex; align-items: center; margin-bottom: 15px;">
                            <span class="status-indicator" id="status-dot"></span>
                            <span id="status-text" style="color: #888;">Checking...</span>
                        </div>
                        <p style="color: #aaa; margin-bottom: 8px;">Status:</p>
                        <div id="scan-status" style="font-weight: bold; color: var(--red-bright); font-size: 1.3rem;">
                            IDLE
                        </div>
                    </div>
                </div>

                <!-- Results Card -->
                <div class="card">
                    <h3>üìä Live Scan Results</h3>
                    <div class="results-container" id="results-container">
                        <div class="empty-state">
                            <p>‚è≥ Waiting for scan data...</p>
                            <p style="font-size: 0.85rem; margin-top: 10px; color: #888;">
                                Start a scan to see results here
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- About Section -->
            <div class="content-section" id="about-section">
                <h1 class="section-title">About NEXUS</h1>
                <p class="section-subtitle">Advanced Security System</p>

                <div class="about-content">
                    <p>
                        NEXUS is a cutting-edge security scanner designed to detect and analyze malicious software 
                        in Java-based applications, particularly Minecraft mods and plugins. Our advanced heuristic 
                        analysis can identify threats that traditional antivirus software might miss.
                    </p>

                    <h2>üéØ Key Features</h2>
                    <ul class="feature-list">
                        <li>Real-time malware detection with advanced heuristic analysis</li>
                        <li>Specialized detection for injection frameworks and RATs</li>
                        <li>Identification of game cheats and unauthorized modifications</li>
                        <li>Macro and keyboard hook detection</li>
                        <li>Anomaly detection for suspicious behavior patterns</li>
                        <li>Web-based dashboard with real-time updates</li>
                        <li>Secure PIN-based access control</li>
                        <li>Comprehensive scan reports and threat categorization</li>
                    </ul>

                    <h2>üîí Security First</h2>
                    <p>
                        NEXUS employs multiple layers of security including PIN generation limits, 
                        one-time use passwords, and CORS protection to ensure your scanning process 
                        remains secure and private. All scanning is performed locally on your machine - 
                        no data is sent to external servers.
                    </p>

                    <h2>‚ö° How It Works</h2>
                    <p>
                        NEXUS uses signature-based detection combined with behavioral analysis to identify 
                        potential threats. The scanner examines JAR files for known malicious patterns, 
                        obfuscation techniques, and suspicious code structures. Results are categorized 
                        by threat type to help you understand what was detected.
                    </p>

                    <h2>üìû Support</h2>
                    <p>
                        For questions, bug reports, or feature requests, please visit our GitHub repository 
                        or contact support through the official channels. We're constantly updating our 
                        detection signatures to protect against new threats.
                    </p>
                </div>
            </div>

            <!-- Account Section -->
            <div class="content-section" id="account-section">
                <h1 class="section-title">Account Settings</h1>
                <p class="section-subtitle">Manage your profile and preferences</p>

                <div class="account-info">
                    <h3>Profile Information</h3>
                    <div class="info-row">
                        <span class="info-label">Username:</span>
                        <span class="info-value" id="account-username">User</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Email:</span>
                        <span class="info-value" id="account-email">user@example.com</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Member Since:</span>
                        <span class="info-value" id="account-joined">Feb 13, 2026</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Account Type:</span>
                        <span class="info-value">Free</span>
                    </div>
                </div>

                <div class="account-info">
                    <h3>Security</h3>
                    <div class="info-row">
                        <span class="info-label">Two-Factor Authentication:</span>
                        <span class="info-value" style="color: #ff6400;">Disabled</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Last Login:</span>
                        <span class="info-value" id="last-login">Just now</span>
                    </div>
                </div>

                <button class="action-btn" style="max-width: 300px; margin-top: 20px;">
                    Change Password
                </button>
            </div>
        </div>
    </div>

    <script>
        const API_URL = 'http://localhost:3000/api';
        let connectionCheckInterval;
        let currentUser = null;

        // ========== AUTH FUNCTIONS ==========
        function switchTab(tab) {
            // Update tabs
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');

            // Update forms
            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
            document.getElementById(tab + '-form').classList.add('active');
        }

        function handleLogin(event) {
            event.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;

            // Simulate login (in production, verify with backend)
            currentUser = {
                username: email.split('@')[0],
                email: email,
                joined: new Date().toLocaleDateString()
            };

            localStorage.setItem('nexus_user', JSON.stringify(currentUser));
            showDashboard();
        }

        function handleRegister(event) {
            event.preventDefault();
            const username = document.getElementById('register-username').value;
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;

            // Simulate registration (in production, send to backend)
            currentUser = {
                username: username,
                email: email,
                joined: new Date().toLocaleDateString()
            };

            localStorage.setItem('nexus_user', JSON.stringify(currentUser));
            showDashboard();
        }

        function loginWithOAuth(provider) {
            // Simulate OAuth login
            alert(`OAuth login with ${provider} would happen here.\n\nIn production, this would redirect to the ${provider} OAuth flow.`);
            
            // For demo, auto-login
            currentUser = {
                username: `${provider}_user`,
                email: `user@${provider}.com`,
                joined: new Date().toLocaleDateString()
            };

            localStorage.setItem('nexus_user', JSON.stringify(currentUser));
            showDashboard();
        }

        function logout() {
            localStorage.removeItem('nexus_user');
            currentUser = null;
            clearInterval(connectionCheckInterval);
            document.getElementById('auth-page').style.display = 'flex';
            document.getElementById('dashboard-page').classList.remove('active');
        }

        function showDashboard() {
            document.getElementById('auth-page').style.display = 'none';
            document.getElementById('dashboard-page').classList.add('active');
            
            // Update user info
            document.getElementById('user-initial').textContent = currentUser.username.charAt(0).toUpperCase();
            document.getElementById('account-username').textContent = currentUser.username;
            document.getElementById('account-email').textContent = currentUser.email;
            document.getElementById('account-joined').textContent = currentUser.joined;
            document.getElementById('last-login').textContent = 'Just now';

            // Start connection check
            checkConnection();
            connectionCheckInterval = setInterval(checkConnection, 2000);
        }

        // ========== NAVIGATION FUNCTIONS ==========
        function showSection(section) {
            // Update nav links
            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
            event.target.classList.add('active');

            // Update sections
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            document.getElementById(section + '-section').classList.add('active');

            // Close dropdown
            document.getElementById('user-dropdown').classList.remove('show');
        }

        function toggleDropdown() {
            document.getElementById('user-dropdown').classList.toggle('show');
        }

        // Close dropdown when clicking outside
        window.onclick = function(event) {
            if (!event.target.matches('.user-avatar')) {
                const dropdown = document.getElementById('user-dropdown');
                if (dropdown.classList.contains('show')) {
                    dropdown.classList.remove('show');
                }
            }
        }

        // ========== SCANNER FUNCTIONS ==========
        function checkConnection() {
            fetch(`${API_URL}/status`)
                .then(res => res.json())
                .then(data => {
                    document.getElementById('status-dot').classList.add('online');
                    document.getElementById('status-text').innerText = 'Connected';
                    document.getElementById('connection-warning').style.display = 'none';
                    document.getElementById('scan-status').innerText = data.scanning ? 'SCANNING...' : 'IDLE';
                    
                    loadPIN();
                    loadResults();
                })
                .catch(() => {
                    document.getElementById('status-dot').classList.remove('online');
                    document.getElementById('status-text').innerText = 'Disconnected';
                    document.getElementById('connection-warning').style.display = 'block';
                });
        }

        function generatePIN() {
            fetch(`${API_URL}/generate-pin`, { method: 'POST' })
                .then(res => {
                    if (!res.ok) {
                        if (res.status === 403) {
                            alert('‚ö†Ô∏è Limit Reached!\n\nYou cannot generate more PINs.\nRestart the scanner to reset.');
                            document.getElementById('genBtn').disabled = true;
                            document.getElementById('genBtn').innerText = 'LIMIT REACHED';
                        }
                        throw new Error('Limit reached');
                    }
                    return res.json();
                })
                .then(data => {
                    document.getElementById('pin-display').innerText = data.pin;
                    updateLimitText(data.remaining);
                })
                .catch(err => console.error('PIN generation error:', err));
        }

        function updateLimitText(remaining) {
            if (remaining !== undefined) {
                document.getElementById('limit-text').innerText = `Generations remaining: ${remaining}`;
                if (remaining === 0) {
                    document.getElementById('genBtn').disabled = true;
                    document.getElementById('genBtn').innerText = 'LIMIT REACHED';
                }
            }
        }

        function loadPIN() {
            fetch(`${API_URL}/pin`)
                .then(r => r.json())
                .then(data => {
                    if (data.pin) {
                        document.getElementById('pin-display').innerText = data.pin;
                    }
                    if (data.remaining !== undefined) {
                        updateLimitText(data.remaining);
                    }
                })
                .catch(() => {});
        }

        function loadResults() {
            fetch(`${API_URL}/results`)
                .then(r => r.json())
                .then(data => {
                    const container = document.getElementById('results-container');
                    
                    if (data.length === 0) {
                        container.innerHTML = `
                            <div class="empty-state">
                                <p>‚úÖ No threats detected</p>
                                <p style="font-size: 0.85rem; margin-top: 10px; color: #888;">
                                    Your system is clean!
                                </p>
                            </div>
                        `;
                        return;
                    }
                    
                    container.innerHTML = '';
                    data.forEach((item, index) => {
                        const div = document.createElement('div');
                        div.className = 'result-item';
                        div.style.animationDelay = `${index * 0.1}s`;
                        div.innerHTML = `
                            <div class="threat-name">${item.threat}</div>
                            <div style="color:#aaa; font-family:monospace; font-size:0.85rem; margin-top:5px;">
                                ${item.path}
                            </div>
                        `;
                        container.appendChild(div);
                    });
                })
                .catch(() => {});
        }

        // Auto-refresh results when scanning
        setInterval(() => {
            const scanStatus = document.getElementById('scan-status').innerText;
            if (scanStatus === 'SCANNING...') {
                loadResults();
            }
        }, 1000);

        // ========== INITIALIZATION ==========
        window.onload = function() {
            // Check if user is already logged in
            const stored = localStorage.getItem('nexus_user');
            if (stored) {
                currentUser = JSON.parse(stored);
                showDashboard();
            }
        };
    </script>
</body>
</html>
